@model PeopleAddressViewModel 
@{
    ViewBag.ViewTitle = Labels.viewTitle_PeopleAddressNew;
    
    ViewBag.LayoutView = LayoutPage.People;
}

@Html.Partial("_ValidationSummaryOuter")

<div>
    @using (Html.BeginForm("NewAddress", "PeopleTombstone", FormMethod.Post, new { @class = "form-horizontal" }))
    {
        @Html.Partial("_PeopleAddress", Model) 
        
        <span id="AddressFormFields">@Html.Partial("_AddressSearch", Model.Address, "Address.")</span>
        
        <div class="form-group">
			<div class="col-sm-offset-2 col-sm-10">
				<button type="submit" class="saveButton">@Labels.Save</button> 
                @Html.ActionLink(Labels.Cancel, "AddressList", "PeopleTombstone", new { id = Model.PersonID }, new { @class = "cancelButton", alt=Labels.Cancel, aria_label = Labels.Cancel, @role = "button" })
			</div>
		</div>         
    }
</div>
@using (Html.BeginScriptContext())
{
    Html.AddScriptBlock(
        @<script type="text/javascript">

            $(function () {

                hideFalseRequiredIf('ddlGeo', 'checkGeoRequired');
            });


            //To be used on OnlyIfMandatory Forms
            function hideFalseRequiredIf(id, fnstring) {
                var element = $('#' + id + '');
                if (element.attr('data-val-requiredif-function') !== undefined) {
                    var str = element.attr('data-val-requiredif-function');
                    if (window[fnstring]() == false) {
                        element.closest('.form-group').hide();
                    }
                } else {
                    console.log('attribute doesnt exist, check requiredif on vm');
                    return;
                }
            }
            
            function checkAddressRequired() {
                if ($('#isAddressRequired').val() == 'True') {
                    return true;
                }
                else {
                    return false;
                }
            }

            function checkGeoRequired() {
                if ($('#isGeoRegionEnforced').val() == 'True') {
                    return true;
                }
                else {
                    return false;
                }
            }

        </script>
);
}