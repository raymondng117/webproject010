@model TreeViewModel

<div class="row">
    <div class="form-group">
        <label class="col-sm-4 control-label">@Labels.SearchTree:</label>
        <input class="col-sm-4  form-control" id="@(Model.TreeName + "SearchBox")" name="@(Model.TreeName + "SearchBox")" placeholder="@Labels.SearchTree" type="text" value="">
        <div class="col-sm-4">
            @Html.Button("ExpandCollapseTree", Labels.ExpandCollapseList, HtmlButtonType.Button, null, new { id = "expandCollapseButton" + Model.TreeName, @class = "addButton btn btn-default" })
        </div>
       
    </div>
    <div class="clearfix"></div>
</div>

<div class="row">
    <div class="col-sm-12">
        <div id="@Model.TreeName" class="hifis-tree" data-collapsed="true" data-wet-boew='{"bCheckBoxes": true, "bCallBackFunction": "wetTreeCheckEvent", "bDisplayIcons": true }'>
            <ul>
                @Html.Partial("_Branch", Model.Root)
            </ul>
        </div>
    </div>
</div>

<script type="text/javascript">

    $("#" + "@Model.TreeName" + "SearchBox").on("keyup", function () {
        $("#@Model.TreeName").jstree(true).search($(this).val());
    });

    $("#expandCollapseButton" + "@Model.TreeName").on("click", function () {

        var thisTree = $("#@Model.TreeName");

        if (thisTree.attr("data-collapsed") === "true") {
            thisTree.jstree("open_all");
            thisTree.attr("data-collapsed", "false");
        }
        else {
            thisTree.jstree("close_all");
            thisTree.attr("data-collapsed", "true");
        }
    });

</script>